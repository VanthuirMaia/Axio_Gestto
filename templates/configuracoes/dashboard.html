{% extends 'base.html' %}

{% block title %}Configuracoes - {{ empresa.nome }}{% endblock %}

{% block content %}
<div class="container-fluid py-3 px-3 px-lg-4">

  <!-- Header -->
  <div class="page-header">
    <h2>Configuracoes</h2>
    <p class="text-muted mb-0">Gerencie seu negocio</p>
  </div>

  <!-- Grid de Cards -->
  <div class="config-grid mb-4">

    <!-- Servicos -->
    <a href="{% url 'servicos_lista' %}" class="config-card">
      <i class="bi bi-scissors config-card-icon text-primary"></i>
      <span class="config-card-title">Servicos</span>
      <span class="config-card-value">{{ total_servicos }}</span>
      <span class="config-card-subtitle">ativos</span>
    </a>

    <!-- Profissionais -->
    <a href="{% url 'profissionais_lista' %}" class="config-card">
      <i class="bi bi-person-badge config-card-icon text-success"></i>
      <span class="config-card-title">Profissionais</span>
      <span class="config-card-value">{{ total_profissionais }}</span>
      <span class="config-card-subtitle">ativos</span>
    </a>

    <!-- Categorias -->
    <a href="{% url 'categorias_lista' %}" class="config-card">
      <i class="bi bi-tags config-card-icon text-warning"></i>
      <span class="config-card-title">Categorias</span>
      <span class="config-card-value">{{ total_categorias }}</span>
      <span class="config-card-subtitle">ativas</span>
    </a>

    <!-- Formas de Pagamento -->
    <a href="{% url 'formas_pagamento_lista' %}" class="config-card">
      <i class="bi bi-credit-card config-card-icon text-info"></i>
      <span class="config-card-title">Pagamentos</span>
      <span class="config-card-value">{{ total_formas_pagamento }}</span>
      <span class="config-card-subtitle">formas</span>
    </a>

    <!-- Horarios -->
    <a href="{% url 'horarios_funcionamento' %}" class="config-card">
      <i class="bi bi-clock config-card-icon" style="color: #0d9488;"></i>
      <span class="config-card-title">Horarios</span>
      <span class="config-card-value">{{ total_datas_especiais }}</span>
      <span class="config-card-subtitle">datas especiais</span>
    </a>

    <!-- Usuarios -->
    <a href="{% url 'usuarios_lista' %}" class="config-card">
      <i class="bi bi-people config-card-icon" style="color: #7c3aed;"></i>
      <span class="config-card-title">Usuarios</span>
      <span class="config-card-value">{{ total_usuarios }}</span>
      <span class="config-card-subtitle">ativos</span>
    </a>

    <!-- Assinatura -->
    <a href="{% url 'configuracoes_assinatura' %}" class="config-card">
      <i class="bi bi-star config-card-icon text-warning"></i>
      <span class="config-card-title">Assinatura</span>
      <span class="config-card-value" style="font-size: 0.875rem;">
        {% if empresa.assinatura %}{{ empresa.assinatura.plano.get_nome_display|truncatechars:10 }}{% else %}-{% endif %}
      </span>
      <span class="config-card-subtitle">
        {% if empresa.assinatura %}{{ empresa.assinatura.get_status_display }}{% else %}sem plano{% endif %}
      </span>
    </a>

    <!-- WhatsApp -->
    <a href="{% url 'whatsapp_dashboard' %}" class="config-card">
      <i class="bi bi-whatsapp config-card-icon text-success"></i>
      <span class="config-card-title">WhatsApp</span>
      <span class="config-card-value">
        {% if empresa.config_whatsapp.esta_conectado %}
          <i class="bi bi-check-circle text-success"></i>
        {% else %}
          <i class="bi bi-x-circle text-secondary"></i>
        {% endif %}
      </span>
      <span class="config-card-subtitle">
        {% if empresa.config_whatsapp %}{{ empresa.config_whatsapp.get_status_display }}{% else %}nao config.{% endif %}
      </span>
    </a>

    <!-- Alterar Senha -->
    <a href="{% url 'alterar_senha' %}" class="config-card">
      <i class="bi bi-key config-card-icon text-secondary"></i>
      <span class="config-card-title">Senha</span>
      <span class="config-card-value"><i class="bi bi-shield-lock"></i></span>
      <span class="config-card-subtitle">alterar</span>
    </a>

  </div>

  <!-- Dados da Empresa -->
  <div class="card card-clean">
    <div class="card-body">
      <h6 class="mb-3" style="font-size: 0.8125rem; font-weight: 600; color: #6b7280;">
        <i class="bi bi-building me-2"></i>DADOS DA EMPRESA
      </h6>
      <div class="row g-3">
        <div class="col-md-6">
          <div class="mb-2">
            <small class="text-muted d-block" style="font-size: 0.6875rem;">NOME</small>
            <span style="font-size: 0.875rem;">{{ empresa.nome }}</span>
          </div>
        </div>
        <div class="col-md-6">
          <div class="mb-2">
            <small class="text-muted d-block" style="font-size: 0.6875rem;">CNPJ/CPF</small>
            <span style="font-size: 0.875rem;">{{ empresa.cnpj|default:"-" }}</span>
          </div>
        </div>
        <div class="col-md-6">
          <div class="mb-2">
            <small class="text-muted d-block" style="font-size: 0.6875rem;">TELEFONE</small>
            <span style="font-size: 0.875rem;">{{ empresa.telefone|default:"-" }}</span>
          </div>
        </div>
        <div class="col-md-6">
          <div class="mb-2">
            <small class="text-muted d-block" style="font-size: 0.6875rem;">E-MAIL</small>
            <span style="font-size: 0.875rem;">{{ empresa.email|default:"-" }}</span>
          </div>
        </div>
        {% if empresa.endereco or empresa.cidade %}
        <div class="col-12">
          <div class="mb-0">
            <small class="text-muted d-block" style="font-size: 0.6875rem;">ENDERECO</small>
            <span style="font-size: 0.875rem;">
              {{ empresa.endereco|default:"" }}
              {% if empresa.cidade and empresa.estado %} - {{ empresa.cidade }}/{{ empresa.estado }}{% endif %}
            </span>
          </div>
        </div>
        {% endif %}
      </div>
    </div>
  </div>

</div>
{% endblock %}
